{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "4b568866_4600997e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2024-04-09T19:38:43Z",
      "side": 1,
      "message": "How would one test this? Install eSIM, factory reset, make sure it still works?",
      "revId": "61287e9457001fb6136b36ef1de0f936446563be",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fbd4c967_6d54f78e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2024-04-10T21:01:49Z",
      "side": 1,
      "message": "1. SIM is detected as missing. Tap \"Setup eSIM\".\n2. Continue, and see \"Checking networking info...\" page. Mobile network icon appears in the status bar in the top right.\n3. \"eSIM found\" page appears. \"A number was previously set up on this phone\". Mobile network icon is still present in the status bar in the top right.\n4. Tap Next.\n5. You are returned to the language selection page (sent backwards), and the mobile network icon is gone from the top right.\n6. Next brings you to the same SIM missing screen. The eSIM is not available.\n\nError in crash log:\n```\nE AndroidRuntime: FATAL EXCEPTION: main\nE AndroidRuntime: Process: com.google.android.euicc, PID: 3500\nE AndroidRuntime: java.lang.RuntimeException: Unable to pause activity {com.google.android.euicc/com.android.euicc.ui.suw.SuwSimMissingActivity}: java.lang.IllegalArgumentException: Receiver not registered: com.android.euicc.ui.suw.SuwSimMissingActivity$SimStateChangeReceiver@c2cb9e8\nE AndroidRuntime: \tat android.app.ActivityThread.performPauseActivityIfNeeded(ActivityThread.java:5476)\nE AndroidRuntime: \tat android.app.ActivityThread.performPauseActivity(ActivityThread.java:5427)\nE AndroidRuntime: \tat android.app.ActivityThread.handlePauseActivity(ActivityThread.java:5379)\nE AndroidRuntime: \tat android.app.servertransaction.PauseActivityItem.execute(PauseActivityItem.java:48)\nE AndroidRuntime: \tat android.app.servertransaction.ActivityTransactionItem.execute(ActivityTransactionItem.java:60)\nE AndroidRuntime: \tat android.app.servertransaction.TransactionExecutor.executeLifecycleItem(TransactionExecutor.java:254)\nE AndroidRuntime: \tat android.app.servertransaction.TransactionExecutor.executeLifecycleState(TransactionExecutor.java:228)\nE AndroidRuntime: \tat android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:91)\nE AndroidRuntime: \tat android.app.ActivityThread$H.handleMessage(ActivityThread.java:2544)\nE AndroidRuntime: \tat android.os.Handler.dispatchMessage(Handler.java:107)\nE AndroidRuntime: \tat android.os.Looper.loopOnce(Looper.java:232)\nE AndroidRuntime: \tat android.os.Looper.loop(Looper.java:317)\nE AndroidRuntime: \tat android.app.ActivityThread.main(ActivityThread.java:8501)\nE AndroidRuntime: \tat java.lang.reflect.Method.invoke(Native Method)\nE AndroidRuntime: \tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:552)\nE AndroidRuntime: \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:878)\nE AndroidRuntime: Caused by: java.lang.IllegalArgumentException: Receiver not registered: com.android.euicc.ui.suw.SuwSimMissingActivity$SimStateChangeReceiver@c2cb9e8\nE AndroidRuntime: \tat android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:1670)\nE AndroidRuntime: \tat android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1873)\nE AndroidRuntime: \tat android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:821)\nE AndroidRuntime: \tat com.android.euicc.ui.suw.SuwSimMissingActivity.onPause(PG:2)\nE AndroidRuntime: \tat android.app.Activity.performPause(Activity.java:8962)\nE AndroidRuntime: \tat android.app.Instrumentation.callActivityOnPause(Instrumentation.java:1720)\nE AndroidRuntime: \tat android.app.ActivityThread.performPauseActivityIfNeeded(ActivityThread.java:5466)\nE AndroidRuntime: \t... 15 more\n```",
      "revId": "61287e9457001fb6136b36ef1de0f936446563be",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4c6657f7_a38def7c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2024-04-10T21:03:00Z",
      "side": 1,
      "message": "The above is with a Google Pixel 6a bluejay. And it says \"Checking network info\" not \"networking info\".",
      "parentUuid": "fbd4c967_6d54f78e",
      "revId": "61287e9457001fb6136b36ef1de0f936446563be",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8a6b54bd_fb4705a4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2024-04-10T21:36:11Z",
      "side": 1,
      "message": "PS1 is closer to what we want I think. It asks to connect to Wi-Fi, then wants to scan a QR code.",
      "parentUuid": "4c6657f7_a38def7c",
      "revId": "61287e9457001fb6136b36ef1de0f936446563be",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a8833f88_730714f9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2024-04-11T15:17:27Z",
      "side": 1,
      "message": "From some testing, the \"Setup eSIM\" feature is apparently not about existing eSIM functionality at all, but about setting up a new eSIM. Existing eSIMs should already show up, but due to quirks and mysterious mysteries, may require a reboot first.",
      "parentUuid": "4b568866_4600997e",
      "revId": "61287e9457001fb6136b36ef1de0f936446563be",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2b964fb2_e195c7fb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2024-04-11T15:17:27Z",
      "side": 1,
      "message": "In 5.5.2, 5.5.0, and 5.4.1, the button didn\u0027t work for me at all. It showed another activity briefly, which quickly disappeared and then the SUW proceed to the next page.\n\nResolving this particular comment because it\u0027s based on the false assumption that this feature is intended for existing eSIMs.",
      "parentUuid": "8a6b54bd_fb4705a4",
      "revId": "61287e9457001fb6136b36ef1de0f936446563be",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c592078c_d1d6943f",
        "filename": "src/org/lineageos/setupwizard/SimMissingActivity.java",
        "patchSetId": 3
      },
      "lineNbr": 78,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2024-04-11T15:17:27Z",
      "side": 1,
      "message": "Since this isn\u0027t a transfer from another device and isn\u0027t about existing eSIMs, I\u0027m curious what happens if we use EUICC_ACTIVATION_TYPE_DEFAULT, or maybe nothing?",
      "revId": "61287e9457001fb6136b36ef1de0f936446563be",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "03771141_03a4504e",
        "filename": "src/org/lineageos/setupwizard/SimMissingActivity.java",
        "patchSetId": 3
      },
      "lineNbr": 78,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2024-04-11T16:17:44Z",
      "side": 1,
      "message": "With any other flag it crashes too unfortunately. The default flag is set by default (aka behaviour without this patch), the BACKUP flag triggers a \"post-flow\" whatever that means and also crashes. TRANSFER triggers \"pre-flow\" and does not crash",
      "parentUuid": "c592078c_d1d6943f",
      "revId": "61287e9457001fb6136b36ef1de0f936446563be",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ca956f72_52ba555c",
        "filename": "src/org/lineageos/setupwizard/SimMissingActivity.java",
        "patchSetId": 3
      },
      "lineNbr": 78,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2024-04-11T16:20:35Z",
      "side": 1,
      "message": "I can confirm that it doesn\u0027t work with EUICC_ACTIVATION_TYPE_DEFAULT. It doesn\u0027t crash though. It loads the EUICC activity super briefly before it disappears, proceeding to the next page (yes, the next one, as opposed to the previous one, which is what happens when it crashes) of the Setup Wizard, without doing anything useful or visible. The crash log is empty.\n\nAlso, I can unfortunately confirm that EUICC_ACTIVATION_TYPE_TRANSFER does not work for enrolling a new SIM from a QR code. It gets stuck on \"Checking network info\", even if connected to Wi-Fi.\n\nPS1, on the other hand, works properly. And if you are not connected to Wi-Fi, it tells you to connect before proceeding.\n\nAs for the \"existing eSIM\" situation, I\u0027ve said it elsewhere, but you just need to reboot once in order for it to be seen from the Setup Wizard. That issue has existed since 5.4.1 or earlier (maybe forever, for all I know).",
      "parentUuid": "c592078c_d1d6943f",
      "revId": "61287e9457001fb6136b36ef1de0f936446563be",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "473d18f0_706fd545",
        "filename": "src/org/lineageos/setupwizard/SimMissingActivity.java",
        "patchSetId": 3
      },
      "lineNbr": 78,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2024-04-11T16:42:06Z",
      "side": 1,
      "message": "Tested EUICC_ACTIVATION_TYPE_TRANSFER with https://esimqr.com/# locally and it provisioned as expected",
      "parentUuid": "ca956f72_52ba555c",
      "revId": "61287e9457001fb6136b36ef1de0f936446563be",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cfe143de_8d0179d9",
        "filename": "src/org/lineageos/setupwizard/SimMissingActivity.java",
        "patchSetId": 3
      },
      "lineNbr": 78,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2024-04-11T17:02:58Z",
      "side": 1,
      "message": "Okay, it\u0027s actually working for me too, seems like it just shows \"Checking network info\" an extra time or two and possibly takes longer.\n\nWe should test this on a non-Pixel as well, if we can. I don\u0027t know if all EUICC apps will respect us giving them the wrong activation type.",
      "parentUuid": "473d18f0_706fd545",
      "revId": "61287e9457001fb6136b36ef1de0f936446563be",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    }
  ]
}